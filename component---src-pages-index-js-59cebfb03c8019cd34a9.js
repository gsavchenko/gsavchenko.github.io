(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=function(e){var t=e.children;return r.a.createElement("div",{style:{margin:"3rem auto",maxWidth:950,padding:"0 1rem"}},t)},i=a(137),s=a.n(i),c=function(e){var t=e.children;return r.a.createElement("div",{className:s.a.header},t)},l=(a(72),a(49),a(136),a(70),a(7)),u=a.n(l),d=(a(139),a(140)),h=a.n(d),f=(a(71),function(){function e(e){this.key=e,this.parent=null,this.children={},this.endOfWord=!1}return e.prototype.getWord=function(){for(var e=[],t=this;null!==t;)e.unshift(t.key),t=t.parent;return e.join("")},e}()),v=function(){function e(){this.root=new f(null)}var t=e.prototype;return t.insert=function(e){for(var t=this.root,a=0;a<e.length;a++)t.children[e[a]]||(t.children[e[a]]=new f(e[a]),t.children[e[a]].parent=t),t=t.children[e[a]],a===e.length-1&&(t.endOfWord=!0)},t.findAllWords=function(e,t){for(var a in e.endOfWord&&t.unshift(e.getWord()),e.children)this.findAllWords(e.children[a],t)},t.search=function(e){for(var t=this.root,a=[],n=0;n<e.length;n++){if(!t.children[e[n]])return a;t=t.children[e[n]]}return this.findAllWords(t,a),a},e}(),m=a(141),p=a.n(m),y=function(e){function t(){var t;return(t=e.call(this)||this).checkSaved=function(){var e=localStorage.getItem("favorites"),a=!1;null!==e&&(e=JSON.parse(e)).forEach(function(e){0===t.state.title.localeCompare(e.title)&&(a=!0)}),!0===a&&t.setState({color:"#56ca90"})},t.toggleFavorite=function(){t.forceUpdate(),"grey"===t.state.color?(t.setState({color:"#56ca90"}),t.props.saveFavorite({title:t.state.title,desc:t.state.desc})):(t.setState({color:"grey"}),t.props.unSaveFavorite({title:t.state.title,desc:t.state.desc}))},t.state={title:"",desc:"",color:"grey"},t}u()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;this.setState({title:this.props.title,desc:this.props.desc},function(){return e.checkSaved()})},a.render=function(){return r.a.createElement("div",{onClick:this.toggleFavorite},r.a.createElement("i",{className:"fa fa-star",style:{color:this.state.color}}))},t}(r.a.Component),g=new v,S=function(e){function t(){var t;if((t=e.call(this)||this).commitChange=function(){"undefined"!=typeof window&&localStorage.setItem("favorites",JSON.stringify(t.state.favorites))},t.saveFavorite=function(e){var a=t.state.favorites.slice();a.push(e),t.setState({favorites:a},function(){return t.commitChange()})},t.unSaveFavorite=function(e){var a=t.state.favorites.slice();if(a.push(e),"undefined"!=typeof window){var n=localStorage.getItem("favorites"),r=0,o=0;null!==n&&(n=JSON.parse(n)).forEach(function(t){0===e.title.localeCompare(t.title)&&(o=r),r++}),a.splice(o),t.setState({favorites:a},function(){return t.commitChange()})}},t.renderSavedItems=function(){return t.state.favorites.map(function(e,a){return r.a.createElement("div",{className:p.a.container,key:a},r.a.createElement("div",{className:p.a.one},r.a.createElement(y,{title:e.title,desc:e.desc,saveFavorite:t.saveFavorite,unSaveFavorite:t.unSaveFavorite})),r.a.createElement("div",{className:p.a.two},e.title),r.a.createElement("div",{className:p.a.three,dangerouslySetInnerHTML:{__html:t.htmlDecode(e.desc)}}))})},"undefined"!=typeof window){var a=JSON.parse(localStorage.getItem("favorites"));null===a&&(a=[]),t.state={search:"",favorites:a}}return t}u()(t,e);var a=t.prototype;return a.htmlDecode=function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},a.shouldComponentUpdate=function(e,t){return this.props.searchQuery!==e.searchQuery||this.state.favorites!==t.favorites},a.loadFavorites=function(){if("undefined"!=typeof window){var e=localStorage.getItem("favorites");null!==e&&this.setState({favorites:JSON.parse(e)})}},a.componentDidMount=function(){var e=this.props.data;Object.keys(e).forEach(function(e){g.insert(e)})},a.renderItem=function(e){var t=this;return e.map(function(e,a){return r.a.createElement("div",{className:p.a.container,key:a},r.a.createElement("div",{className:p.a.one},r.a.createElement(y,{title:t.props.data[e].title,desc:t.props.data[e].body,saveFavorite:t.saveFavorite,unSaveFavorite:t.unSaveFavorite})),r.a.createElement("div",{className:p.a.two,dangerouslySetInnerHTML:{__html:t.htmlDecode(t.props.data[e].title)}}),r.a.createElement("div",{className:p.a.three,dangerouslySetInnerHTML:{__html:t.htmlDecode(t.props.data[e].body)}}))})},a.renderFavorites=function(){if(null!=this.state&&this.state.favorites.length>0)return r.a.createElement("div",null,"Favorites ",r.a.createElement("div",null,this.renderSavedItems()))},a.render=function(){var e=g.search(this.props.searchQuery);return r.a.createElement("div",null,this.renderItem(e),this.renderFavorites())},t}(r.a.Component),E={},w=function(e){function t(t){var a;return(a=e.call(this,t)||this).mapData=function(e){var t=e.allWastewizardJson.edges;Object.keys(t).forEach(function(e){var a=t[e].node.keywords.toLowerCase().split(",");a=a.map(function(e){return e.trim()});var n=t[e].node;a.forEach(function(e){E[e]=n})})},a.submitSearch=function(e){a.setState({searchQuery:e.toLowerCase()})},a.handleChange=function(e){a.setState({inputValue:e.target.value}),""===e.target.value&&a.submitSearch("nothing")},a.keyPress=function(e){13===e.keyCode&&a.submitSearch(e.target.value)},a.state={inputValue:"",searchQuery:""},a.mapData(a.props.JSONData),a}return u()(t,e),t.prototype.render=function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:h.a.searchContainer},r.a.createElement("input",{value:this.state.inputValue,onKeyDown:this.keyPress,onChange:this.handleChange,className:"searchElement",type:"text",placeholder:"Search...",name:"search"}),r.a.createElement("button",{className:"searchElement",onClick:function(){return e.submitSearch(e.state.inputValue)}},r.a.createElement("i",{className:"fa fa-search fa-2x"}))),r.a.createElement(S,{data:E,searchQuery:this.state.searchQuery}))},t}(r.a.Component);a.d(t,"query",function(){return N});t.default=function(e){var t=e.data;return r.a.createElement("div",null,r.a.createElement(c,null,"Toronto Waste Lookup"),r.a.createElement(o,null,r.a.createElement(w,{JSONData:t})))};var N="3075050974"},137:function(e,t,a){e.exports={header:"header-module--header--30i_J"}},140:function(e,t,a){e.exports={searchContainer:"search-module--searchContainer--2wecm",searchElement:"search-module--searchElement--22yKZ"}},141:function(e,t,a){e.exports={container:"searchResults-module--container--2Y6Jy",one:"searchResults-module--one--3Lbe0",two:"searchResults-module--two--1-rhK",three:"searchResults-module--three--IbWke"}}}]);
//# sourceMappingURL=component---src-pages-index-js-59cebfb03c8019cd34a9.js.map