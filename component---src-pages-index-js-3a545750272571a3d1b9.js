(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{135:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=function(e){var t=e.children;return a.a.createElement("div",{style:{margin:"3rem auto",maxWidth:950,padding:"0 1rem"}},t)},o=r(136),s=r.n(o),c=function(e){var t=e.children;return a.a.createElement("div",{className:s.a.header},t)},u=(r(70),r(71),r(7)),l=r.n(u),d=(r(137),r(138)),f=r.n(d),h=(r(49),function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var r=t.prototype;return r.htmlDecode=function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},r.render=function(){return a.a.createElement("div",{className:this.props.style,dangerouslySetInnerHTML:{__html:this.htmlDecode(this.props.content)}})},t}(a.a.Component)),p=function(e){function t(){return e.apply(this,arguments)||this}return l()(t,e),t.set=function(e,t){"undefined"!=typeof window&&localStorage.setItem(e,JSON.stringify(t))},t.getWrapper=function(e){if("undefined"!=typeof window)return localStorage.getItem(e)},t.obtain=function(e,t){var r=this.getWrapper(e);if(this.isCreateOptionEnabled(t)||(t={createIfMissing:!1}),null===r){if(!0===t.createIfMissing)return[]}else r=JSON.parse(r);return r},t.isCreateOptionEnabled=function(e){return void 0!==e&&void 0!==e.createIfMissing},t}(a.a.Component),m={ON:"#56ca90",OFF:"grey"},v=function(e){function t(){var t;return(t=e.call(this)||this).initialize=function(){!0===t.checkIfActivated()&&t.activate()},t.saveToLocalStorage=function(e){var t=p.obtain("favorites",{createIfMissing:!0});t.push(e),p.set("favorites",t)},t.deleteFromLocalStorage=function(e){var t=p.obtain("favorites").filter(function(t){return 0!==t.title.localeCompare(e.title)});p.set("favorites",t)},t.checkIfActivated=function(){var e=!1;return p.obtain("favorites",{createIfMissing:!0}).forEach(function(r){0===t.state.title.localeCompare(r.title)&&(e=!0)}),e},t.toggleColor=function(){!1===t.state.isActive?t.activate():t.deactivate()},t.toggleLocalStorage=function(){!1===t.state.isActive?t.saveToLocalStorage({title:t.state.title,desc:t.state.desc}):t.deleteFromLocalStorage({title:t.state.title,desc:t.state.desc})},t.toggleFavorite=function(){t.toggleColor(),t.toggleLocalStorage(),t.props.update()},t.state={title:"",desc:"",color:m.OFF,isActive:!1},t}l()(t,e);var r=t.prototype;return r.componentDidMount=function(){var e=this;this.setState({title:this.props.title,desc:this.props.desc},function(){return e.initialize()})},r.activate=function(){this.setState({color:m.ON,isActive:!0})},r.deactivate=function(){this.setState({color:m.OFF,isActive:!1})},r.render=function(){return a.a.createElement("i",{onClick:this.toggleFavorite,className:"fa fa-star",style:{color:this.state.color}})},t}(a.a.Component),g=r(139),y=r.n(g),E=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var r=t.prototype;return r.renderStar=function(e){return a.a.createElement("div",{className:y.a.column+" "+y.a.star},a.a.createElement(v,{title:e.title,desc:e.desc,update:this.props.update}))},r.renderEntryTitle=function(e){return a.a.createElement("div",{className:y.a.column+" "+y.a.left},e)},r.renderEntryDescription=function(e){return a.a.createElement(h,{style:y.a.column+" "+y.a.right,content:e})},r.renderEntries=function(){var e=this;return this.props.entries.map(function(t,r){return a.a.createElement("div",{key:r,className:y.a.row+" "+y.a.container},e.renderStar(t),e.renderEntryTitle(t.title),e.renderEntryDescription(t.desc))})},r.render=function(){return this.renderEntries()},t}(a.a.Component),w=function(e){function t(){var t;return(t=e.call(this)||this).update=function(){var e=p.obtain("favorites");t.setState({favorites:[]},function(){return t.setState({favorites:e})}),t.props.update()},t.state={favorites:p.obtain("favorites",{createIfMissing:!0})},t}l()(t,e);var r=t.prototype;return r.componentDidUpdate=function(e){this.props.entries!==e.entries&&this.update()},r.renderFavoritesHeader=function(){if(this.state.favorites.length>0)return a.a.createElement("h1",{style:{color:"#56ca90",marginTop:"20px"}},"Favorites")},r.renderFavorites=function(){return a.a.createElement(E,{entries:this.state.favorites,update:this.update})},r.render=function(){return a.a.createElement("div",null,this.renderFavoritesHeader(),this.renderFavorites())},t}(a.a.Component),S=function(e){function t(){var t;return(t=e.call(this)||this).update=function(){var e=p.obtain("favorites");t.setState({favorites:e})},t.updateSearchResults=function(){t.props.update()},t.state={search:"",favorites:p.obtain("favorites",{createIfMissing:!0})},t}return l()(t,e),t.prototype.render=function(){return a.a.createElement("div",null,a.a.createElement(E,{entries:this.props.searchResults,update:this.update}),a.a.createElement(w,{entries:this.state.favorites,update:this.updateSearchResults}))},t}(a.a.Component),k=(r(72),r(140),function(){function e(e){this.key=e,this.parent=null,this.children={},this.endOfWord=!1}return e.prototype.getWord=function(){for(var e=[],t=this;null!==t;)e.unshift(t.key),t=t.parent;return e.join("")},e}()),R=function(){function e(){this.root=new k(null)}var t=e.prototype;return t.insert=function(e){for(var t=this.root,r=0;r<e.length;r++)t.children[e[r]]||(t.children[e[r]]=new k(e[r]),t.children[e[r]].parent=t),t=t.children[e[r]],r===e.length-1&&(t.endOfWord=!0)},t.findAllWords=function(e,t){for(var r in e.endOfWord&&t.unshift(e.getWord()),e.children)this.findAllWords(e.children[r],t)},t.search=function(e){for(var t=this.root,r=[],n=0;n<e.length;n++){if(!t.children[e[n]])return r;t=t.children[e[n]]}return this.findAllWords(t,r),r},e}(),b=function(){function e(){}return e.storeKeywordsInTrie=function(){var e=this;Object.keys(this.keywordDictionary).forEach(function(t){e.keywords.insert(t)})},e.mapWasteWizardKeywords=function(e){var t=this,r=e.allWastewizardJson.edges;Object.keys(r).forEach(function(e){var n=r[e].node;t.sanAndTok(n.keywords).forEach(function(e){t.keywordDictionary[e]=n})}),this.storeKeywordsInTrie()},e.sanAndTok=function(e){return e.toLowerCase().split(",").map(function(e){return e.trim()})},e}();b.keywordDictionary={},b.keywords=new R;var C=b,N={ENTER:13},W=function(e){function t(t){var r;return(r=e.call(this,t)||this).submitSearch=function(e){var t=C.keywords.search(e.toLowerCase()),n=r.titlesToEntries(t);""===e?r.submitNoResults():0===n.length&&0!==e.localeCompare("default")?r.submitNoResults():r.setState({searchResults:n})},r.handleChange=function(e){r.setState({input:e.target.value}),""===e.target.value&&r.clearSearchResults()},r.keyPress=function(e){e.keyCode===N.ENTER&&r.submitSearch(e.target.value)},r.update=function(){var e=p.obtain("favorites"),t=[].concat(r.state.searchResults),n=[];t.forEach(function(t){var r=!0;e.forEach(function(e){0===e.title.localeCompare(t.title)&&(r=!1)}),!1===r&&n.push(t)}),r.setState({searchResults:n},function(){return r.setState({searchResults:t})})},r.state={input:"",searchResults:[]},r}l()(t,e);var r=t.prototype;return r.titlesToEntries=function(e){return e.map(function(e){return{title:e,desc:C.keywordDictionary[e].body}})},r.clearSearchResults=function(){this.submitSearch("default")},r.submitNoResults=function(){this.setState({searchResults:[{title:"Oh no :(",desc:"No results for this query, try again!"}]})},r.render=function(){var e=this;return a.a.createElement("div",null,a.a.createElement("div",{className:f.a.row},a.a.createElement("input",{value:this.state.input,onKeyDown:this.keyPress,onChange:this.handleChange,className:f.a.column+" "+f.a.left,type:"text",placeholder:"Search...",name:"search"}),a.a.createElement("button",{className:f.a.column+" "+f.a.right,onClick:function(){return e.submitSearch(e.state.input)}},a.a.createElement("i",{className:"fa fa-search fa-2x"}))),a.a.createElement(S,{searchResults:this.state.searchResults,update:this.update}))},t}(a.a.Component);r.d(t,"query",function(){return O});t.default=function(e){var t=e.data;return a.a.createElement("div",null,C.mapWasteWizardKeywords(t),a.a.createElement(c,null,"Toronto Waste Lookup"),a.a.createElement(i,null,a.a.createElement(W,null)))};var O="3075050974"},136:function(e,t,r){e.exports={header:"header-module--header--30i_J"}},138:function(e,t,r){e.exports={column:"search-module--column--3yJ04",left:"search-module--left--G7MM0",right:"search-module--right--3Wo8q",row:"search-module--row--3jsJW"}},139:function(e,t,r){e.exports={container:"searchResults-module--container--2Y6Jy",column:"searchResults-module--column--1OLTj",star:"searchResults-module--star--YeSYK",left:"searchResults-module--left--2iYOe",right:"searchResults-module--right--3MtYu",row:"searchResults-module--row--1DRXF"}}}]);
//# sourceMappingURL=component---src-pages-index-js-3a545750272571a3d1b9.js.map